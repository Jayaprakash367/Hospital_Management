<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management System - My Billing</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <h1>üè• Hospital Management System - My Billing</h1>
        <p>Welcome, {{ user.full_name if user.full_name else user.username }}</p>
        <nav>
            <a href="{{ url_for('patient_dashboard') }}">Dashboard</a>
            <a href="{{ url_for('patient_billing') }}">My Billing</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </nav>
    </header>
    <main>
        <section>
            <h2>My Billing Records</h2>
            <div id="patient-billing-list">
                {% if billing %}
                    <table>
                        <thead>
                            <tr>
                                <th>Bill ID</th>
                                <th>Appointment ID</th>
                                <th>Total Amount</th>
                                <th>Paid Amount</th>
                                <th>Status</th>
                                <th>Bill Date</th>
                                <th>Due Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for bill in billing %}
                                <tr>
                                    <td>{{ bill.bill_id }}</td>
                                    <td>{{ bill.appointment_id or 'N/A' }}</td>
                                    <td>${{ "%.2f"|format(bill.total_amount) }}</td>
                                    <td>${{ "%.2f"|format(bill.paid_amount) }}</td>
                                    <td>{{ bill.payment_status }}</td>
                                    <td>{{ bill.bill_date }}</td>
                                    <td>{{ bill.due_date or 'N/A' }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p>No billing records found.</p>
                {% endif %}
            </div>
        </section>
    </main>
    <script src="{{ url_for('static', filename='js/patient_billing.js') }}"></script>
</body>
</html>
