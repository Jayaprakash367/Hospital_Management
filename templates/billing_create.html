<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management System - Create Bill</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <h1>üè• Hospital Management System - Create New Bill</h1>
        <p>Welcome, {{ user.full_name if user.full_name else user.username }}</p>
        <nav>
            <a href="{{ url_for('home') }}">Dashboard</a>
            <a href="{{ url_for('patients') }}">Patients</a>
            <a href="{{ url_for('doctors') }}">Doctors</a>
            <a href="{{ url_for('appointments') }}">Appointments</a>
            <a href="{{ url_for('billing') }}">Billing</a>
            <a href="{{ url_for('reports') }}">Reports</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </nav>
    </header>
    <main>
        <section>
            <h2>Create New Bill</h2>
            {% if error %}
                <div class="error-message">{{ error }}</div>
            {% endif %}
            <form id="create-bill-form" method="POST">
                <div class="form-group">
                    <label for="patient_id">Patient:</label>
                    <select id="patient_id" name="patient_id" required>
                        <option value="">Select a patient</option>
                        {% for patient in patients %}
                            <option value="{{ patient.patient_id }}">{{ patient.first_name }} {{ patient.last_name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label for="appointment_id">Appointment (Optional):</label>
                    <select id="appointment_id" name="appointment_id">
                        <option value="">Select an appointment</option>
                        {% for appointment in appointments %}
                            <option value="{{ appointment.appointment_id }}">Appointment {{ appointment.appointment_id }} - {{ appointment.appointment_date }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label for="total_amount">Total Amount:</label>
                    <input type="number" id="total_amount" name="total_amount" step="0.01" min="0" required>
                </div>

                <div class="form-group">
                    <label for="due_date">Due Date:</label>
                    <input type="date" id="due_date" name="due_date">
                </div>

                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" name="description" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="notes">Notes:</label>
                    <textarea id="notes" name="notes" rows="2"></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit">Create Bill</button>
                    <a href="{{ url_for('billing') }}" class="cancel-btn">Cancel</a>
                </div>
            </form>
        </section>
    </main>
    <script src="{{ url_for('static', filename='js/billing_create.js') }}"></script>
</body>
</html>
